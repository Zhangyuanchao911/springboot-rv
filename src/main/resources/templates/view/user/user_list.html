<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>模拟销售</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../../../static/css/bootstrap.min.css">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="../../../static/js/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="../../../static/js/bootstrap.min.js"></script>
    <!--toastr-->
    <link rel="stylesheet" href="../../../static/css/toastr.min.css">
    <script src="../../../static/js/toastr.min.js"></script>
    <style>
        .table th, .table td{
            text-align: center;
        }
    </style>
</head>
<body>
<div style="padding:0px; margin:0px;">
    <ul class="breadcrumb" style="  margin:0px; ">
        <li>系统管理</li>
        <li>用户管理</li>
        <li>用户列表</li>
    </ul>
</div>
<div class="row alert alert-info" style="margin:0px; padding:3px;">
    <form class="form-inline" th:action="@{/rv/sys-user/fuzzyList}">
        <div class="form-group">
            <label class="" for="activename">用户姓名：</label>
            <input type="text" name="kw" class="form-control" id="activename" placeholder="请输入用户姓名">
        </div>
        <input type="submit" class="btn btn-danger" value="查询"/>
        &nbsp;&nbsp;
        <a class="btn btn-success" th:href="@{/view/user/user_add}">添加用户</a>
    </form>
</div>
<div class="row" style="padding:15px; padding-top:0px; ">
    <table class="table table-striped table-bordered table-hover">
        <tr>
            <th><b>序号</b></th>
            <th>姓名</th>
            <th>账号</th>
            <th>密码</th>
            <th>联系电话</th>
            <th>性别</th>
            <th>角色</th>
            <th>操作</th>
        </tr>
        <tr th:each="user: ${users}">
            <td><b th:text="${userStat.index+1}"></b></td>
            <td th:text="${user.user.userName}"></td>
            <td th:text="${user.user.userAccount}"></td>
            <td th:text="${user.user.userPassword}"></td>
            <td th:text="${user.user.userTel}"></td>
            <td th:text="${user.user.userSex}"></td>
            <td th:text="${user.role.roleName}"></td>
            <td>
                <a th:href="@{/rv/sys-user/findbyid(id=${user.user.userId})}" class="btn btn-sm btn-primary">修改</a>
                <a id="delete" th:href="@{/rv/sys-user/delete(id=${user.user.userId})}" name="deleted"
                   class="btn btn-sm btn-danger">删除</a>
            </td>
        </tr>

    </table>
    <!--显示分页信息-->
    <div class="modal-footer no-margin-top">
        <div class="col-md-6">
            当前第 [[${pageInfo.current}]]页,共 [[${pageInfo.pages}]] 页.一共 [[${pageInfo.total}]] 条记录
        </div>

        <ul class="pagination pull-right no-margin">
            <li>
                <a th:href="'/rv/sys-user/list?pageNum='+${1}">首页</a>
            </li>
            <!--遍历条数-->
            <li th:each="nav:${list}">
                <a th:href="'/rv/sys-user/list?pageNum='+${nav}" th:text="${nav}" th:if="${nav != pageInfo.current}"></a>
                <span style="font-weight: bold;background: #6faed9;" th:if="${nav == pageInfo.current}" th:text="${nav}" ></span>
            </li>


            <li>
                <a th:href="'/rv/sys-user/list?pageNum='+${pageInfo.pages}">尾页</a>
            </li>
        </ul>
    </div>
</div>
<script th:inline="javascript">
    toastr.options = {
        closeButton: false,
        debug: false,
        progressBar: true,
        positionClass: "toast-top-center",
        onclick: null,
        showDuration: "300",
        hideDuration: "3000",
        timeOut: "3000",
        extendedTimeOut: "3000",
        showEasing: "swing",
        hideEasing: "linear",
        showMethod: "fadeIn",
        hideMethod: "fadeOut"
    };
    $("[name=deleted]").click(function () {
        if (confirm("确定删除该记录？")) {
            return true;
        } else {
            return false;
        }
    });
    var success = [[${success}]];
    if (success != null) {
        toastr.success(success);
    }
    var fail = [[${fail}]];
    if (fail != null) {
        toastr.warning(fail);
    }
</script>
</body>
</html>
